<!-- pages/ships.html — V1.0.46_SPECS_ENRICH -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VAISSEAUX — Base & Recherche</title>

  <!-- Core theme (background + neon) -->
  <link rel="stylesheet" href="../assets/css/core.css" />

  <!-- Module styles (scoped) -->
  <link rel="stylesheet" href="../assets/css/ships.css?v=V1.0.25_SCM_NAV_SPEEDS" />
</head>

<body class="page-ships">
  <div class="page-wrap theme-neon">
    <div class="ships-shell">

      <!-- Top actions -->
      <div class="top-actions">
        <a class="btn-pill" href="../index.html">← HUB</a>
        <a class="btn-pill btn-cyan" href="https://discord.gg/d3Q5RJ35gr" target="_blank" rel="noopener">DISCORD</a>
        <a class="btn-pill btn-strong" href="https://discord.com/channels/1428047802805653640/1453446130858852422" target="_blank" rel="noopener">Support</a>
      </div>

      <!-- Hero -->
      <header class="hero-card">
        <h1 class="page-title">VAISSEAUX</h1>
        <div class="page-subtitle">Recherche rapide des capacités et prix (IRL / in-game) + filtre rôle — PU 4.5</div>
      </header>

      <!-- Content -->
      <section class="section ships-section">
        <div class="panel panel-strong">
          <div class="panel-head">
            <div class="panel-title">Recherche</div>
            <div id="shipsDbStatus" class="chip chip-soft">Chargement…</div>
          </div>

          <div class="ships-search">
  <label class="ships-label" for="shipQuery">Nom du vaisseau</label>
  <div class="ships-search-row">
    <input id="shipQuery" class="input ships-input" type="text" placeholder="Tape le nom du vaisseau… (ex: C2, Caterpillar, Cutlass)" autocomplete="off" />
    <button id="shipClear" class="btn btn-ghost" type="button" aria-label="Effacer">Effacer</button>
  </div>

  <div class="ships-filter-row">
    <div class="ships-filter-top">
      <label class="ships-filter-label" for="shipMaker">Constructeur</label>
    </div>
    <select id="shipMaker" class="ships-select">
      <option value="__ALL__">Tous les constructeurs</option>
    </select>
  </div>

  <div class="ships-filter-row">
    <div class="ships-filter-top">
      <label class="ships-filter-label" for="shipRole">Rôle</label>
      <span class="ships-mini">(référence Erkul / RSI)</span>
    </div>
    <select id="shipRole" class="ships-select">
      <option value="__ALL__">Tous les rôles</option>
    </select>
  </div>
  <div class="ships-filter-row ships-filter-row-compact">
    <label class="ships-check">
      <input type="checkbox" id="filterConcepts" />
      <span>Inclure les concepts (non flight-ready)</span>
    </label>
  </div>


  <div id="shipResults" class="ships-results" role="listbox" aria-label="Résultats"></div>
</div>
        </div>

        <div class="panel panel-strong ships-details-panel">
          <div class="panel-head">
            <div class="panel-title">Fiche vaisseau</div>
            <div id="shipSelectedBadge" class="chip chip-soft">Aucun vaisseau sélectionné</div>
          </div>

          <div id="shipCard" class="ship-card is-empty">
            <div class="empty">Tape un nom, puis sélectionne un vaisseau.</div>
          </div>
        </div>
      </section>

      <!-- Version footer -->
      <div class="version-footer page-ships-version" id="versionFooter">
        <button id="versionToggle" class="version-bar" type="button" aria-expanded="false">
          <div class="version-main" id="versionMainText">VAISSEAUX V1.0.52 • PU 4.5</div>
          <div class="version-cta">Détails</div>
        </button>

        <div id="versionDetails" class="version-details is-hidden">
          <div class="version-details-header">
            <div class="version-details-title">Versions techniques</div>
            <div class="version-details-actions"><button id="copyVersionsBtn" class="btn" type="button">Copier</button><button id="copyBugTemplateBtn" class="btn" type="button">Template bug</button><button id="copyDebugInfoBtn" class="btn" type="button">Infos debug</button></div>
          </div>

          <div class="version-grid" role="table" aria-label="Versions techniques VAISSEAUX">
            <div class="version-col">
              <div class="version-k" role="cell">Module</div><div class="version-v" role="cell" id="tvModuleShips">—</div>
              <div class="version-k" role="cell">Core</div><div class="version-v" role="cell" id="tvCoreShips">—</div>
              <div class="version-k" role="cell">DB</div><div class="version-v" role="cell" id="tvDbShips">—</div>
            </div>
          </div>

          <div class="version-details-note">
            <div class="tech-details" id="versionCopyText">—</div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script src="../assets/js/ships.js?v=V1.2.47_SPEED_MERGE_ZERO_FIX" defer></script><script>
(function tvTechbarInit(){
  "use strict";

  var toggle = document.getElementById("versionToggle");
  var panel  = document.getElementById("versionDetails");

  if (!toggle || !panel) return;

  function setOpen(open){
    panel.classList.toggle("is-hidden", !open);
    toggle.setAttribute("aria-expanded", open ? "true" : "false");
  }

  // Default closed
  setOpen(false);

  toggle.addEventListener("click", function(e){
    e.preventDefault();
    e.stopPropagation();
    var isOpen = !panel.classList.contains("is-hidden");
    setOpen(!isOpen);
  });

  // Close when clicking outside
  document.addEventListener("click", function(e){
    var t = e.target;
    if (toggle.contains(t) || panel.contains(t)) return;
    setOpen(false);
  });

  // Close on ESC
  document.addEventListener("keydown", function(e){
    if (e.key === "Escape" && !panel.classList.contains("is-hidden")){
      setOpen(false);
    }
  });

  // Copy versions (optional)
  var btnCopy = document.getElementById("copyVersionsBtn");
  if (btnCopy){
    btnCopy.addEventListener("click", async function(e){
      e.preventDefault(); e.stopPropagation();
      var rowsK = panel.querySelectorAll(".version-k");
      var rowsV = panel.querySelectorAll(".version-v");
      var lines = [];
      for (var i=0;i<Math.min(rowsK.length, rowsV.length);i++){
        var k = (rowsK[i].textContent || "").trim();
        var v = (rowsV[i].textContent || "").trim();
        if (k && v) lines.push(k + ": " + v);
      }
      var text = lines.join("\n");
      var ok = false;
      try{
        if (navigator.clipboard && navigator.clipboard.writeText){
          await navigator.clipboard.writeText(text);
          ok = true;
        }
      }catch(err){ ok = false; }

      if (!ok){
        try{
          var ta = document.createElement("textarea");
          ta.value = text;
          ta.setAttribute("readonly","");
          ta.style.position="fixed";
          ta.style.top="-1000px";
          ta.style.left="-1000px";
          document.body.appendChild(ta);
          ta.select();
          try{ ok = document.execCommand("copy"); }catch(err2){ ok = false; }
          document.body.removeChild(ta);
        }catch(err3){ ok = false; }
      }

      var old = btnCopy.textContent;
      btnCopy.textContent = ok ? "Copié ✓" : "Échec";
      btnCopy.disabled = true;
      setTimeout(function(){
        btnCopy.textContent = old;
        btnCopy.disabled = false;
      }, 1200);

      if (!ok){
        try{ window.prompt("Copie manuelle (Ctrl+C / Cmd+C) :", text); }catch(err4){}
      }
    });
  }
})();
</script>


<script defer src="../assets/js/support-tools.js?v=V1.0.0"></script>
</body>
</html>
