/* assets/css/mining.css - Version V1.3.97 */
/* assets/css/mining.css — Version V1.3.80
   Module: MINAGE (Mode Débutant)
   Règles:
   - Ne PAS re-skin .panel / .card / inputs : géré par core.css
   - mining.css = layout + micro-composants propres au module
   - Typo delegated to core.css (no fixed px font sizes)
*/

.page-mining{ min-height: 100vh; }

/* Container */
.page-mining .mining-shell{
  width: 100%;
  display: flex;
  justify-content: center;
  padding: 0 16px 28px;
}

.page-mining .mining-container{
  width: min(1520px, 100%);
  position: relative;
}

/* Header */
.page-mining .page-hero{
  position: relative;
  padding: 22px 0 6px;
  text-align: center;
}

/* Hide utility (scoped) */
.page-mining .is-hidden{ display:none !important; }

/* Remove number input spinners */
.page-mining input[type=number]::-webkit-outer-spin-button,
.page-mining input[type=number]::-webkit-inner-spin-button{
  -webkit-appearance: none;
  margin: 0;
}
.page-mining input[type=number]{
  -moz-appearance: textfield;
  appearance: textfield;
}

/* Panels head */
.page-mining .panel-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.page-mining .panel-title{
  color: var(--accent);
  font-weight: 700;
}

.page-mining .panel-subtitle{
  color: rgba(231,236,255,.72);
  font-size: var(--font-xs);
  font-weight: 700;
}

.page-mining .panel-chip{
  padding: 5px 10px;
  border-radius: var(--pill);
  border: 1px solid rgba(0,229,255,.18);
  background: rgba(0,0,0,.22);
  font-weight: 700;
  font-size: var(--font-xs);
  color: var(--text);
}

.page-mining .panel-badge{
  display: inline-flex;
  gap: 8px;
  align-items: center;
}

/* Layout grid */
.page-mining .mining-grid{
  display: grid;
  grid-template-columns: minmax(740px, 1.25fr) minmax(620px, 1fr);
  gap: 14px;
  align-items: start;
}


/* ============================
   Mode Avancé (Raffinage) — Layout 4 panneaux (A)
   Objectif:
   - 4 panneaux sur 1 ligne (desktop), centrés, marges uniformes
   - Responsive: 2 colonnes puis 1 colonne
   - Aucun leak vers le mode débutant (tout est dans #moduleAdvancedView)
   Notes:
   - Ne pas re-skin .panel / .card / inputs : core.css
   - On scrolle à l’intérieur des listes, pas sur tout le panel, sauf besoin
   ============================ */

/* IMPORTANT:
   .module-view est en display:contents pour que le mode Débutant puisse "injecter"
   ses panels directement dans la grille principale.
   En revanche, le mode Avancé doit être un VRAI item de grid pour span 100% (2 colonnes),
   donc on override son display.
*/

/* Advanced view spans full mining grid */
.page-mining #moduleAdvancedView{
  display: block;              /* override .module-view { display: contents } */
  margin-top: 14px;
  grid-column: 1 / -1;
  min-width: 0;
}

/* 4 panels grid */
.page-mining #moduleAdvancedView .adv-grid.adv-grid-4{
  width: 100%;
  display: grid;
  grid-template-columns: repeat(4, minmax(260px, 1fr));
  gap: 14px;
  align-items: start;
}

/* Panel internal layout: allow body to take remaining height */
.page-mining #moduleAdvancedView .adv-grid.adv-grid-4 > .panel{
  display: flex;
  flex-direction: column;
  min-width: 0;
}

/* Default: scroll inside panel-body */
.page-mining #moduleAdvancedView .adv-grid.adv-grid-4 > .panel > .panel-body{
  flex: 1;
  min-height: 0;
  overflow: auto;
}

/* Panel-specific tuning */
.page-mining #moduleAdvancedView .adv-orepick > .panel-body{
  overflow: visible; /* allow (future) suggest dropdown to escape */
}
.page-mining #moduleAdvancedView .adv-orepick .adv-avail-ores{
  max-height: 520px;
  overflow: auto;
  padding-right: 6px;
}

.page-mining #moduleAdvancedView .adv-chosen .adv-selected-list{
  max-height: 420px;
  overflow: auto;
  padding-right: 6px;
}

/* Make sure long JSON/debug areas don’t explode the layout */
.page-mining #moduleAdvancedView pre,
.page-mining #moduleAdvancedView code{
  max-width: 100%;
  overflow: auto;
}

/* Responsive: 2 columns */
@media (max-width: 1320px){
  .page-mining #moduleAdvancedView .adv-grid.adv-grid-4{
    grid-template-columns: repeat(2, minmax(280px, 1fr));
  }
}

/* Responsive: 1 column */
@media (max-width: 820px){
  .page-mining #moduleAdvancedView .adv-grid.adv-grid-4{
    grid-template-columns: 1fr;
  }
  .page-mining #moduleAdvancedView .adv-orepick .adv-avail-ores{ max-height: 420px; }
  .page-mining #moduleAdvancedView .adv-chosen .adv-selected-list{ max-height: 360px; }
}



/* Right column stack: Résultat + Sélection minerais */
.page-mining .right-col{
  display: flex;
  flex-direction: column;
  gap: 14px;
  min-width: 0;
}

.page-mining .ore-single{
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.page-mining .ore-sidehint{
  margin: 0 2px;
  opacity: 0.72;
}

.page-mining .ore-selected-list{
  margin-top: 2px;
  max-height: 240px;
  overflow: auto;
  padding-right: 6px;
}
/* Fields */
.page-mining .field{ margin-top: 10px; }
.page-mining label{
  display: block;
  color: var(--muted);
  margin-bottom: 6px;
  font-weight: 650;
}

.page-mining .row-inline{
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

/* Presets */
.page-mining .preset-row{
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.page-mining .btn-preset{
  height: 32px;
  padding: 0 12px;
  border-radius: var(--pill);
  border: 1px solid rgba(0,229,255,.18);
  background: rgba(0,0,0,.18);
  color: var(--text);
  cursor: pointer;
  font-size: var(--font-xs);
}

.page-mining .btn-preset.is-active{
  background: rgba(0,229,255,.14);
  border-color: rgba(0,229,255,.38);
  font-weight: 800;
}

/* Hint */
.page-mining .hint{
  margin-top: 6px;
  color: var(--muted);
  font-size: var(--font-xs);
}

/* Actions */
.page-mining .actions-row{
  margin-top: 12px;
  display: flex;
  justify-content: flex-end;
}

/* Custom picker (select harmonisé) */
.page-mining .picker{ position: relative; }
.page-mining .picker-btn{
  width: 100%;
  height: 40px;
  border-radius: 12px;
  border: 1px solid rgba(0,229,255,.18);
  background: rgba(0,0,0,.26);
  color: var(--text);
  padding: 0 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  cursor:pointer;
  text-align:left;
}

/* Compact pickers — Type de minage + Vaisseau de minage (réduction ~50%) */
#miningTypePickerBtn,
#miningShipPickerBtn{
  height: 36px;
  border-radius: 12px;
  padding: 0 12px;
  font-size: 14px;
}

#miningTypePickerBtn .picker-caret,
#miningShipPickerBtn .picker-caret{
  font-size: 12px;
}
#miningTypePickerMenu .picker-item,
#miningShipPickerMenu .picker-item{
  padding: 6px 10px;
  font-size: 13px;
}

/* Largeur compactée des pickers (Type de minage + Vaisseau) */
.page-mining .picker--half{
  width: 50%;
  max-width: 520px;
  min-width: 320px;
}

.page-mining .picker-btn:focus-visible{
  outline:none;
  border-color: rgba(0,229,255,.32);
  box-shadow: 0 0 0 2px rgba(0,229,255,.10), 0 0 18px rgba(0,229,255,.10);
}
.page-mining .picker-label{
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.page-mining .picker-caret{
  color: rgba(231,236,255,.55);
  font-size: var(--font-xs);
}
.page-mining .picker-menu{
  position:absolute;
  left:0; right:0;
  top: calc(100% + 8px);
  z-index: 60;

  background: rgba(6,12,20,.96);
  border: 1px solid rgba(0,229,255,.18);
  border-radius: 14px;
  box-shadow: 0 0 30px rgba(0,229,255,.08);

  overflow: auto;
  max-height: 240px;
  padding: 8px;
}
.page-mining .picker-item{
  width: 100%;
  padding: 10px 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  color: rgba(231,236,255,.88);
  cursor: pointer;
  text-align: left;
  font-weight: 700;
}
.page-mining .picker-item:hover{
  background: rgba(0,229,255,.08);
  border-color: rgba(0,229,255,.14);
}
.page-mining .picker-item.is-active{
  background: rgba(0,229,255,.12);
  border-color: rgba(0,229,255,.18);
}
.page-mining .picker-empty{
  padding: 10px 10px;
  color: rgba(231,236,255,.70);
  font-weight: 700;
  font-size: var(--font-xs);
}

/* Beginner input mode toggle */
.page-mining .input-mode{
  margin-top: 12px;
  display: flex;
  gap: 8px;
  padding: 6px;
  border-radius: var(--pill);
  border: 1px solid rgba(0,229,255,.18);
  background: rgba(0,0,0,.18);
}
.page-mining .input-mode-btn{
  flex: 1;
  height: 38px;
  border-radius: var(--pill);
  border: 1px solid transparent;
  background: transparent;
  color: rgba(231,236,255,.88);
  cursor: pointer;
  font-weight: 800;
}
.page-mining .input-mode-btn.is-active{
  background: rgba(0,229,255,.14);
  border-color: rgba(0,229,255,.22);
  color: var(--text);
}

/* Ore chips */
.page-mining .chips{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.page-mining .chip{
  height: 32px;
  padding: 0 12px;
  border-radius: var(--pill);
  border: 1px solid rgba(0,229,255,.18);
  background: rgba(0,0,0,.18);
  color: rgba(231,236,255,.88);
  cursor: pointer;
  font-weight: 800;
  font-size: var(--font-xs);
}
.page-mining .chip.is-active{
  background: rgba(0,229,255,.12);
  border-color: rgba(0,229,255,.32);
  color: var(--text);
}

/* KPI */
.page-mining .kpi-grid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.page-mining .kpi{ padding: 12px; }
.page-mining .kpi-strong{ border-color: rgba(0,229,255,.22); }
.page-mining .kpi-wide{
  grid-column: 1 / -1;
}
.page-mining .kpi-value-wrap{
  white-space: normal;
  line-height: 1.2;
}
.page-mining .kpi-refinery-method .kpi-value{
  font-size: var(--font-md);
}
.page-mining .kpi-refinery-method .kpi-sub{
  display: inline-block;
  margin-top: 4px;
  color: var(--muted);
  font-weight: 700;
  font-size: var(--font-sm);
}


.page-mining .kpi-label{
  color: var(--muted);
  font-size: var(--font-xs);
}
.page-mining .kpi-value{
  margin-top: 6px;
  color: var(--accent);
  font-weight: 800;
  font-size: var(--font-md);
}

.page-mining .divider{
  margin: 14px 0 10px;
  height: 1px;
  background: rgba(231,236,255,.10);
}

.page-mining .verdict{ padding: 12px; }
.page-mining .verdict-label{ color: var(--muted); font-size: var(--font-xs); }
.page-mining .verdict-value{ margin-top: 6px; font-weight: 800; color: var(--text); }

/* Verdict pill */
.page-mining .verdict-pill{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 10px;
  border-radius: var(--pill);
  border: 1px solid rgba(231,236,255,.16);
  background: rgba(255,255,255,.03);
  color: rgba(231,236,255,.90);
  font-weight: 900;
  letter-spacing: .02em;
  min-width: 90px;
}
.page-mining .verdict-pill.is-off{ opacity: .75; }
.page-mining .verdict-pill.is-ok{
  border-color: rgba(0,229,255,.22);
  background: rgba(0,229,255,.08);
}
.page-mining .verdict-pill.is-good{
  border-color: rgba(0,229,255,.40);
  background: rgba(0,229,255,.14);
  box-shadow: 0 0 14px rgba(0,229,255,.10);
}
.page-mining .verdict-pill.is-bad{
  border-color: rgba(255,140,80,.28);
  background: rgba(255,140,80,.08);
}

/* Badges */
.page-mining .badge{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: var(--pill);
  border: 1px solid rgba(231,236,255,.16);
  background: rgba(255,255,255,.03);
  color: rgba(231,236,255,.90);
  font-weight: 900;
  letter-spacing: .02em;
  font-size: var(--font-xs);
}

.page-mining .badge-risk{
  border-color: rgba(255,140,80,.28);
  background: rgba(255,140,80,.08);
}

.page-mining .badge-stable{
  border-color: rgba(0,229,255,.22);
  background: rgba(0,229,255,.08);
}

/* Sellers box */
.page-mining .sellers{
  margin-top: 10px;
}
.page-mining .seller-item{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid rgba(231,236,255,.12);
  background: rgba(0,0,0,.14);
  margin-top: 8px;
}
.page-mining .seller-name{
  font-weight: 800;
  color: rgba(231,236,255,.92);
  font-size: var(--font-sm);
}
.page-mining .seller-price{
  font-weight: 900;
  color: var(--accent);
  font-size: var(--font-sm);
}
.page-mining .seller-badge{
  margin-left: 10px;
  padding: 4px 10px;
  border-radius: var(--pill);
  border: 1px solid rgba(0,229,255,.18);
  background: rgba(0,229,255,.08);
  color: rgba(231,236,255,.90);
  font-weight: 900;
  font-size: var(--font-xs);
}
.page-mining .seller-badge.is-warn{
  border-color: rgba(255,140,80,.24);
  background: rgba(255,140,80,.08);
}

/* Compact note */
.page-mining .compact-note{
  margin-top: 10px;
  color: rgba(231,236,255,.70);
  font-size: var(--font-xs);
}

/* Version badge */
.page-mining .module-version{
  position: fixed;
  right: 14px;
  bottom: 10px;
  z-index: 20;

  padding: 4px 10px;
  font-size: var(--font-xs);
  line-height: 1;
  letter-spacing: .2px;
  color: rgba(231,236,255,.55);

  background: rgba(0,0,0,.28);
  border-radius: 6px;
  pointer-events: none;
}

/* Responsive */
@media (max-width: 1240px){
  .page-mining .mining-grid{ grid-template-columns: 1fr; }
}

@media (max-width: 980px){
  .page-mining .mining-grid{ grid-template-columns: 1fr; }

  .page-mining .top-actions{
    position: static;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 10px;
  }

  .page-mining .page-hero{ padding-top: 12px; }

}

/* Input warning (capacity exceeded) */
.page-mining .input-warn{
  border-color: rgba(255,140,80,.42) !important;
  box-shadow: 0 0 0 2px rgba(255,140,80,.10), 0 0 18px rgba(255,140,80,.10);
}
.page-mining .hint-warn{
  color: rgba(255,200,170,.85);
}

/* Ore chip colors */
.page-mining .chip{
  --chip-bg: rgba(148,163,184,.16);
  --chip-bd: rgba(148,163,184,.34);
  --chip-tx: rgba(255,255,255,.92);
  background: var(--chip-bg) !important;
  border-color: var(--chip-bd) !important;
  color: var(--chip-tx) !important;
}
.page-mining .chip.is-active{
  box-shadow: 0 0 0 2px rgba(255,255,255,.06), 0 0 22px rgba(255,255,255,.06);
  transform: translateY(-1px);
}
.page-mining .chip .chip-dot{
  display:inline-block;
  width:10px;
  height:10px;
  border-radius:50%;
  background: var(--chip-dot, rgba(255,255,255,.65));
  box-shadow: 0 0 0 2px rgba(0,0,0,.18);
  margin-right:8px;
}

/* Version footer (compact) */
.page-mining .page-mining .version-bar{
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  border-radius: 16px;
  padding: 10px 14px;
  cursor: pointer;

  background: rgba(10, 22, 34, .55);
  border: 1px solid rgba(70, 140, 170, .30);
  box-shadow: 0 0 0 1px rgba(0,0,0,.25), 0 10px 28px rgba(0,0,0,.22);
  backdrop-filter: blur(8px);
}

.page-mining .version-bar:hover{
  border-color: rgba(70, 190, 210, .40);
}

.page-mining .version-main{
  font-weight: 700;
  letter-spacing: .2px;
  color: rgba(255,255,255,.92);
  font-size: var(--font-sm);
}

.page-mining .version-cta{
  font-size: var(--font-xs);
  color: rgba(120, 230, 255, .90);
  font-weight: 700;
}

.page-mining .version-details{
  margin-top: 10px;
  border-radius: 16px;
  padding: 12px 14px;

  background: rgba(8, 18, 28, .62);
  border: 1px solid rgba(70, 140, 170, .25);
  box-shadow: 0 0 0 1px rgba(0,0,0,.22), 0 10px 26px rgba(0,0,0,.18);
  backdrop-filter: blur(10px);
}

.page-mining .version-details-header{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.page-mining .version-details-title{
  font-weight: 800;
  color: rgba(255,255,255,.90);
  font-size: var(--font-sm);
}

.page-mining .version-grid{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px 16px;
}

@media (max-width: 820px){
  .page-mining .picker--half{ width:100%; max-width:none; min-width:0; }

  .page-mining .version-grid{ grid-template-columns: 1fr; }
}

.page-mining .version-col{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 6px 10px;
}

.page-mining .version-k{
  color: rgba(255,255,255,.70);
  font-size: var(--font-xs);
}

.page-mining .version-v{
  color: rgba(255,255,255,.92);
  font-size: var(--font-xs);
  font-weight: 700;
}

.page-mining .is-hidden{ display:none !important; }

/* screen reader only */
.page-mining .sr-only{
  position:absolute !important;
  width:1px; height:1px;
  padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0);
  white-space:nowrap; border:0;
}

/* Unit ratio badge */
.page-mining .ratio-badge{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
  padding: 7px 10px;
  border-radius: 999px;

  background: rgba(10, 22, 34, .45);
  border: 1px solid rgba(70, 140, 170, .22);
  color: rgba(255,255,255,.82);
  font-size: var(--font-xs);
  font-weight: 700;
  letter-spacing: .2px;
}

/* Discord pill button contrast (restore) */
/* Half-width input (Temps de session) */
.page-mining .input-half{
  width: 50% !important;
}
@media (max-width: 820px){
  .page-mining .input-half{ width: 100% !important; }
}

/* ============================
   UEX Live (chart) — V1.3.0
============================ */
.uex-live{
  margin-bottom: 12px;
  padding: 12px 12px 10px;
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 14px;
  background: rgba(0,0,0,.18);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.12);
}

.uex-live-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom: 10px;
}

.uex-live-title{
  font-weight: 800;
  letter-spacing: .02em;
  color: rgba(255,255,255,.92);
}

/* .uex-toggle removed (live-only) */
.uex-toggle{
  display:flex;
  align-items:center;
  gap:8px;
  font-size: var(--font-xs);
  color: rgba(255,255,255,.78);
  user-select:none;
}

/* .uex-toggle removed (live-only) */
.uex-toggle input{ transform: translateY(1px); }

.uex-live-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom: 10px;
}

.uex-live-status{
  font-size: var(--font-xs);
  color: rgba(255,255,255,.70);
}

.uex-live-metrics{
  display:grid;
  grid-template-columns: 1fr 140px;
  gap:10px;
  margin-bottom: 10px;
}

.uex-metric{
  border: 1px solid rgba(255,255,255,.07);
  border-radius: 12px;
  padding: 10px;
  background: rgba(0,0,0,.16);
}

.uex-k{
  font-size: var(--font-xs);
  color: rgba(255,255,255,.65);
  margin-bottom: 4px;
}

.uex-v{
  font-weight: 800;
  color: rgba(255,255,255,.92);
  font-size: var(--font-sm);
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.uex-chart{
  border: 1px solid rgba(255,255,255,.07);
  border-radius: 12px;
  padding: 8px;
  background: rgba(0,0,0,.16);
}

#uexChart{
  display:block;
  width:100%;
  height: 120px;
}

.uex-chart-legend{
  margin-top: 6px;
  font-size: var(--font-xs);
  color: rgba(255,255,255,.65);
}


/* ============================
   MINING – Mode switch capsule like FRET (V1.3.9)
   Requirements:
   - centered
   - no overlap with hero title block
   - shared capsule outline (like FRET)
============================ */

/* Give the hero a little air so the capsule never overlaps */
.page-mining .hero-card{
  margin-bottom: 26px;
}

/* Shared capsule around both buttons */
.page-mining .mode-switch{
  position: relative !important;
  top: 0 !important;
  width: min(980px, 100%) !important;
  margin: 0 auto 24px auto !important;

  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  gap: 0 !important;

  padding: 6px !important;
  border-radius: 999px !important;

  background: rgba(0,0,0,.35) !important;
  backdrop-filter: blur(14px) !important;
  -webkit-backdrop-filter: blur(14px) !important;

  border: 1px solid rgba(231,236,255,.22) !important;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.05),
    0 8px 22px rgba(0,0,0,.35) !important;
}

/* Buttons inside the capsule */
.page-mining .mode-switch .mode-btn,
.page-mining .mode-switch .mode-tab{
  border-radius: 999px !important;
  padding: 10px 26px !important;

  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;

  color: rgba(255,255,255,.88) !important;
}

/* Hover */
.page-mining .mode-switch .mode-btn:hover,
.page-mining .mode-switch .mode-tab:hover{
  background: rgba(255,255,255,.06) !important;
}

/* Active (selected) */
.page-mining .mode-switch .mode-btn.is-active,
.page-mining .mode-switch .mode-tab.is-active,
.page-mining .mode-switch .mode-btn[aria-selected="true"],
.page-mining .mode-switch .mode-tab[aria-selected="true"]{
  background: color-mix(in srgb, var(--accent) 22%, rgba(0,0,0,.35)) !important;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.18) !important;
  color: rgba(255,255,255,.95) !important;
}

@media (max-width: 520px){
  .page-mining .hero-card{ margin-bottom: 22px; }
  .page-mining .mode-switch{ width: 100% !important; }
  .page-mining .mode-switch .mode-btn,
  .page-mining .mode-switch .mode-tab{ padding: 9px 16px !important; }
}



/* ============================
   Version footer (MINAGE)
   Closed label: "MINAGE Vx · PU 4.5" + "Détails"
   ============================ */
.page-mining .page-mining-version{
  position: fixed;
  left: 50%;
  bottom: 14px;
  transform: translateX(-50%);
  width: min(980px, calc(100% - 24px));
  z-index: 9999;
}

.page-mining .page-mining-version .version-bar{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 14px;
  border-radius: 16px;
  cursor: pointer;

  background: rgba(10, 22, 34, .55);
  border: 1px solid rgba(70, 140, 170, .30);
  box-shadow: 0 0 0 1px rgba(0,0,0,.25), 0 10px 28px rgba(0,0,0,.22);
  backdrop-filter: blur(8px);
}

.page-mining .page-mining-version .version-left{
  font-weight: 900;
  letter-spacing: .02em;
  color: rgba(231,236,255,.90);
  white-space: nowrap;
  overflow:hidden;
  text-overflow: ellipsis;
}

.page-mining .page-mining-version .version-right{
  font-size: var(--font-xs);
  color: rgba(120, 230, 255, .95);
  font-weight: 900;
  white-space: nowrap;
}

.page-mining .page-mining-version .version-details{
  margin-top: 10px;
  border-radius: 16px;
  padding: 12px 14px;
  background: rgba(8, 18, 28, .62);
  border: 1px solid rgba(70, 140, 170, .25);
  box-shadow: 0 0 0 1px rgba(0,0,0,.22), 0 10px 26px rgba(0,0,0,.18);
  backdrop-filter: blur(10px);
}

.page-mining .page-mining-version .version-details-header{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.page-mining .page-mining-version .version-details-title{
  font-weight: 900;
  color: rgba(255,255,255,.92);
  font-size: var(--font-sm);
}

.page-mining .page-mining-version .version-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px 16px;
}

@media (max-width: 820px){
  .page-mining .page-mining-version .version-grid{ grid-template-columns: 1fr; }
}

.page-mining .page-mining-version .version-col{
  display:grid;
  grid-template-columns: 1fr auto;
  gap: 6px 10px;
}

.page-mining .page-mining-version .version-k{
  color: rgba(255,255,255,.70);
  font-size: var(--font-xs);
}

.page-mining .page-mining-version .version-v{
  color: rgba(255,255,255,.92);
  font-size: var(--font-xs);
  font-weight: 900;
  text-align:right;
}

.page-mining .is-hidden{ display:none !important; }

/* Actions in MINING tech details header */
.page-mining .page-mining-version .version-details-actions{
  display:flex;
  align-items:center;
  gap: 10px;
}

/* ============================
   UX SAFE: focus-visible (MINAGE)
   ============================ */
.page-mining :where(a, button, [role="button"], input, select, textarea, .picker, .picker button, .version-bar):focus-visible{
  outline: 2px solid rgba(120, 230, 255, .85);
  outline-offset: 3px;
  border-radius: 12px;
}

.page-mining .picker button:focus-visible{
  outline-offset: 4px;
}

.page-mining .page-mining-version .version-bar:focus-visible{
  outline-offset: 4px;
}

/* ============================
   UX SAFE: micro-harmonisation (MINAGE)
   Align heading spacing with FRET baseline
   ============================ */
.page-mining .hero{
  margin-bottom: 14px;
}

.page-mining .hero h1,
.page-mining .hero .page-title{
  margin-bottom: 6px;
}

.page-mining .hero .subtitle,
.page-mining .hero p{
  margin-top: 0;
}


/* ------------------------------------------------
   MINING - Ore dual selector (Disponibles / Sélection)
   ------------------------------------------------ */

.ore-dual{
  display: grid;
  grid-template-columns: minmax(250px, 0.9fr) minmax(460px, 1.1fr);
  gap: 14px;
}

@media (max-width: 860px){
  .ore-dual{ grid-template-columns: 1fr; }
}

.ore-col{
  min-width: 0;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.02);
  border-radius: 16px;
  padding: 10px;
}

.ore-col-head{
  font-weight: 700;
  font-size: 12px;
  opacity: 0.85;
  margin: 2px 0 8px 2px;
  letter-spacing: 0.2px;
}

.ore-list{
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 360px;
  overflow: auto;
  padding-right: 4px;
}

.ore-item{
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
  color: inherit;
  cursor: pointer;
  text-align: left;
  width: 100%;
  max-width: 1320px;
  margin: 0 auto;
  overflow: visible;
}

.ore-item:hover{
  border-color: rgba(0, 255, 255, 0.25);
}

.ore-item.is-selected{
  background: rgba(0, 255, 255, 0.06);
  border-color: rgba(0, 255, 255, 0.25);
}

.ore-dot{
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--ore-dot);
  box-shadow: 0 0 0 3px rgba(255,255,255,0.06);
  flex: 0 0 10px;
}

.ore-name{
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.ore-selected-meta{
  display: grid;
  grid-template-columns: minmax(0, 1.35fr) minmax(120px, 0.95fr) minmax(90px, 0.75fr) minmax(90px, 0.85fr) 40px;
  gap: 8px;
  margin: 0 2px 6px 2px;
  font-size: 12px;
  opacity: 0.70;
}


.ore-selected-col{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.ore-selected-col.is-right{
  text-align: right;
}

.ore-selected-col.is-center{
  text-align: center;
}

.ore-row{
  display: grid;
  grid-template-columns: minmax(0, 1.35fr) minmax(120px, 0.95fr) minmax(90px, 0.75fr) minmax(90px, 0.85fr) 40px;
  gap: 8px;
  align-items: center;
}


.ore-remove-btn{
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid rgba(0, 255, 255, 0.35);
  background: rgba(0, 255, 255, 0.08);
  color: rgba(0, 255, 255, 0.95);
  font-size: 20px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.ore-remove-btn:hover{
  background: rgba(0, 255, 255, 0.14);
  border-color: rgba(0, 255, 255, 0.55);
}

.ore-remove-btn:focus-visible{
  outline: 2px solid rgba(0, 255, 255, 0.60);
  outline-offset: 2px;
}

.ore-qty-input{
  width: 100%;
  min-width: 110px;
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(10, 20, 30, 0.35);
  border: 1px solid rgba(255,255,255,0.12);
  color: rgba(255,255,255,0.95);
  text-align: right;
  font-variant-numeric: tabular-nums;
  box-shadow: 0 0 0 3px rgba(255,255,255,0.05);
}

.ore-qty-input::placeholder{
  color: rgba(255,255,255,0.45);
}

.ore-price, .ore-subtotal{
  font-variant-numeric: tabular-nums;
  text-align: right;
  opacity: 0.95;
}

.picker-empty{
  opacity: 0.6;
  padding: 10px 6px;
}

@media (max-width: 680px){
  .ore-selected-meta{ font-size: 11px; }
  .ore-value{ font-size: 12px; }
}
/* ---------- Top 3 vendeurs (global, minerai actif) ---------- */
.top-sellers-panel{
  margin-top: 12px;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.18);
}
.top-sellers-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}
.top-sellers-title{
  font-weight: 700;
  letter-spacing: 0.2px;
}
.top-sellers-ore-label{
  opacity: 0.9;
  font-weight: 600;
}
.top-sellers-list{
  display: grid;
  gap: 6px;
}
.top-sellers-empty{
  opacity: 0.7;
  font-size: 0.92rem;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px dashed rgba(255,255,255,0.12);
}
.top-sellers-note{
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px 10px;
  margin: 6px 0 10px;
  border-radius: 12px;

  /* Callout "attention" : vente brute (non raffiné) */
  border: 1px solid rgba(255, 198, 90, 0.35);
  background: rgba(255, 198, 90, 0.10);
  color: rgba(255, 232, 190, 0.95);

  font-size: var(--font-xs);
  line-height: 1.25;
  opacity: 1;
}

.top-sellers-note__icon{
  flex: 0 0 auto;
  line-height: 1;
  margin-top: 1px;
  font-size: 13px;
}

.top-sellers-note__text{
  flex: 1 1 auto;
}


.top-seller-row{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.12);
}
.top-seller-name{
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-weight: 600;
}
.top-seller-price{
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
  opacity: 0.95;
}

/* ---------- Minerai actif (badge + surbrillance) ---------- */
.ore-row.is-active{
  border-color: rgba(0, 255, 255, 0.28);
  box-shadow: 0 0 0 1px rgba(0, 255, 255, 0.18) inset;
}
.ore-item.is-selected{
  position: relative;
}
.ore-active-badge{
  margin-left: 10px;
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 0.72rem;
  font-weight: 800;
  letter-spacing: 0.25px;
  border: 1px solid rgba(0, 255, 255, 0.35);
  background: rgba(0, 255, 255, 0.10);
  color: rgba(220, 255, 255, 0.95);
}


/* Modifier (réservé) */
.top-sellers-note--warning{}

/* === Module mode views (Beginner / Advanced) === */
.module-view{ display: contents; }
#moduleAdvancedView.module-view{ display:block; }

/* Advanced mode layout */
.advanced-grid{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  margin-top: 10px;
}
@media (max-width: 820px){
  .advanced-grid{ grid-template-columns: 1fr; }
}

.advanced-actions{
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
  margin-top: 12px;
}

/* Info alert component (neutral/cyan) */
.info-alert{
  display: flex;
  gap: 10px;
  align-items: flex-start;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(0,0,0,0.18);
}

.info-alert__icon{
  width: 18px;
  min-width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-top: 2px;
  opacity: 0.9;
}

.info-alert__text{
  line-height: 1.25;
}

.info-alert--cyan{
  border-color: rgba(0, 255, 255, 0.22);
  background: linear-gradient(90deg, rgba(0, 255, 255, 0.10), rgba(0,0,0,0.18));
}

.muted{ opacity: 0.78; }


/* === Advanced mode (polish) === */
.page-mining .actions-row{
  gap: 10px;
  flex-wrap: wrap;
}

.page-mining .btn-secondary{
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(0, 255, 255, 0.18);
  background: rgba(0, 0, 0, 0.22);
  color: rgba(220, 255, 255, 0.92);
}
.page-mining .btn-secondary:hover{
  border-color: rgba(0, 255, 255, 0.28);
  background: rgba(0, 0, 0, 0.26);
}

.adv-step{
  margin-top: 10px;
}

.adv-step__head{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.adv-step__title{
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 650;
  letter-spacing: 0.2px;
}

.adv-step__num{
  width: 22px;
  height: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  border: 1px solid rgba(0, 255, 255, 0.22);
  background: rgba(0, 255, 255, 0.08);
  color: rgba(220, 255, 255, 0.95);
  font-size: 12px;
  flex: 0 0 auto;
}

.adv-step__meta{
  font-size: var(--font-xs);
  color: rgba(220, 255, 255, 0.78);
  white-space: nowrap;
}

.adv-selected{
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.10);
  background: rgba(0, 0, 0, 0.14);
  padding: 10px;
}

.adv-empty{
  color: rgba(220, 255, 255, 0.72);
  font-size: var(--font-sm);
  padding: 6px 6px;
}

.adv-selected-list{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* Advanced panels: allow dropdown to overflow cleanly */
.adv-select,
.adv-select .panel-body{
  overflow: visible !important;
}

.adv-results .panel-body{
  min-height: 380px;
}

/* Keep Results readable (scroll if very long) */
@media (min-width: 981px){
  .adv-results .panel-body{
    max-height: 560px;
    overflow: auto;
  }
}

.adv-selected-list li{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.16);
}

/* Advanced selection — Ship-only */
.adv-select-add{
  display:grid;
  grid-template-columns: 1fr 180px auto;
  gap: 12px;
  align-items:end;
}

@media (max-width: 720px){
  .adv-select-add{ grid-template-columns: 1fr; }
}

.adv-field-compact{ margin-top: 0; position: relative; z-index: 5; }

.adv-add-btnwrap{
  display:flex;
  justify-content:flex-end;
}


/* Advanced ore search suggestions (custom dropdown) */
.adv-suggest{
  position:absolute;
  left:0;
  right:0;
  top: calc(100% + 6px);
  z-index: 9999;
  border-radius: 14px;
  border: 1px solid rgba(0, 255, 255, 0.18);
  background: rgba(0, 10, 14, 0.92);
  box-shadow: 0 14px 40px rgba(0,0,0,0.45);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  overflow:hidden;
  max-height: 260px;
  overflow-y:auto;
}

.adv-suggest.is-hidden{ display:none; }

.adv-suggest-item{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 12px;
  background: transparent;
  border: 0;
  color: rgba(230, 255, 255, 0.92);
  text-align:left;
  cursor:pointer;
}

.adv-suggest-item:hover,
.adv-suggest-item.is-active{
  background: rgba(0, 255, 255, 0.10);
}

.adv-suggest-name{
  font-weight: 700;
}

.adv-suggest-key{
  font-size: .82rem;
  opacity: .80;
  white-space:nowrap;
}

.adv-suggest-empty{
  padding: 10px 12px;
  font-size: .88rem;
  opacity: .80;
}
@media (max-width: 720px){
  .adv-add-btnwrap{ justify-content:stretch; }
  .adv-add-btnwrap .btn{ width:100%; }
}

.adv-toolbar{
  margin-top: 10px;
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  align-items:center;
}

.adv-mini-status{
  margin-left:auto;
  min-height: 18px;
  font-size: .85rem;
  opacity: .82;
}

/* Override selected list row layout for editable qty + remove */
.adv-selected-list li{
  justify-content:space-between;
}

.adv-sel-left{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}

.adv-sel-key{
  opacity:.6;
  font-size:.82rem;
  white-space:nowrap;
}

.adv-sel-right{
  display:flex;
  align-items:center;
  gap:10px;
  flex-shrink:0;
}

.adv-sel-qty{
  width: 120px;
  max-width: 140px;
}

.adv-sel-unit{
  opacity:.75;
  font-weight:650;
}

.adv-sel-remove{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  line-height: 1;
  text-align: center;

  width: 36px;
  height: 36px;
  border-radius: 12px;
  border: 1px solid rgba(0,229,255,.22);
  background: rgba(0,0,0,.16);
  color: var(--accent);
  font-weight: 800;
  cursor: pointer;
}

.adv-sel-remove:hover{
  background: rgba(0,229,255,.10);
}

.adv-selected-name{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}

.adv-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:2px 10px;
  border-radius:999px;
  border:1px solid rgba(0,255,255,.22);
  background: rgba(0,255,255,.10);
  font-size:.78rem;
  letter-spacing:.02em;
  white-space:nowrap;
}

.adv-selected-meta{
  margin-top:12px;
  padding-top:12px;
  border-top:1px solid rgba(255,255,255,.10);
}

.adv-selected-meta .meta-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:6px 0;
  opacity:.92;
}

.adv-fields{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px 14px;
}

@media (max-width: 720px){
  .adv-fields{ grid-template-columns: 1fr; }
  .page-mining .adv-params{ grid-column: 1; grid-row: auto; }
}

.adv-actions{
  margin-top: 14px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.adv-status{
  margin-top: 10px;
  min-height: 18px;
  font-size: .92rem;
  opacity:.95;
}

.adv-note{
  margin-top: 10px;
  font-size: .85rem;
  opacity:.78;
}

.adv-results .panel-body{
  padding-top: 14px;
}

.adv-kpis{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  margin-bottom: 14px;
}

@media (max-width: 980px){
  .adv-kpis{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 520px){
  .adv-kpis{ grid-template-columns: 1fr; }
}

.kpi{
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.14);
  padding: 12px;
}

.kpi .kpi-label{
  font-size:.80rem;
  opacity:.78;
  margin-bottom: 6px;
}

.kpi .kpi-value{
  font-size: 1.15rem;
  font-weight: 700;
  letter-spacing:.02em;
}

.adv-items{
  display:flex;
  flex-direction:column;
  gap: 10px;
}

.adv-item{
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.12);
  overflow:hidden;
}

.adv-item-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 12px;
  padding: 12px 12px;
}

.adv-item-title{
  min-width:0;
}

.adv-item-title .t-main{
  font-weight:700;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.adv-item-title .t-sub{
  font-size:.85rem;
  opacity:.78;
  margin-top:2px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.adv-item-metrics{
  display:flex;
  gap: 12px;
  align-items:center;
  white-space:nowrap;
}

.adv-item-metrics .metric{
  text-align:right;
  font-size:.92rem;
  opacity:.92;
}

.adv-item-metrics .metric strong{
  display:block;
  font-size: 1rem;
  opacity: 1;
}

.adv-item-body{
  padding: 10px 12px 12px 12px;
  border-top:1px solid rgba(255,255,255,.08);
}

.adv-sellers{
  display:flex;
  flex-direction:column;
  gap: 8px;
  margin-top: 10px;
}

.adv-seller{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 8px 10px;
  border-radius: 12px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(0,0,0,.10);
}

.adv-debug{
  margin-top: 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.10);
  padding: 10px 12px;
}

.adv-debug summary{
  cursor:pointer;
  user-select:none;
  font-weight: 600;
  opacity:.88;
}

.empty-state, .loading-state, .error-state{
  padding: 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.10);
}

.error-state{
  border-color: rgba(255,90,90,.35);
  background: rgba(255,90,90,.08);
}



/* ------------------------------------------------------------
   Advanced Mode — Click-to-add "Disponibles" (ship-only)
   ------------------------------------------------------------ */
.adv-avail-wrap{
  margin-top: 12px;
  padding: 10px 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.10);
}
.adv-avail-head{
  display:flex; align-items:baseline; justify-content:space-between;
  gap:10px; margin-bottom:10px;
}
.adv-avail-title{ font-weight:700; font-size:13px; letter-spacing:0.2px; color:rgba(255,255,255,0.92); }
.adv-avail-hint{ font-size:12px; color:rgba(255,255,255,0.60); }
.adv-avail-ores{
  display:flex; flex-wrap:wrap; gap:8px;
  max-height:160px; overflow:auto; padding-right:4px;
}
.adv-ore-chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:7px 10px; border-radius:999px;
  border:1px solid rgba(255,255,255,0.14);
  background:rgba(0,0,0,0.18);
  color:rgba(255,255,255,0.90);
  font-size:12.5px; line-height:1;
  cursor:pointer; user-select:none;
  transition:transform 120ms ease, border-color 120ms ease, background 120ms ease;
}
.adv-ore-chip:hover{
  transform:translateY(-1px);
  border-color:rgba(0,255,255,0.35);
  background:rgba(0,0,0,0.26);
}
.adv-ore-chip.is-selected{
  border-color:rgba(0,255,255,0.55);
  background:rgba(0,255,255,0.08);
}
.adv-ore-badge{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:22px; height:18px; padding:0 6px;
  border-radius:999px; font-size:11px; font-weight:700;
  color:rgba(0,0,0,0.85); background:rgba(0,255,255,0.75);
}
.adv-avail-empty{ font-size:12px; color:rgba(255,255,255,0.60); padding:6px 2px; }



/* ------------------------------------------------------------
   Advanced Mode — Selection split (Disponibles left / Sélectionnés right)
   ------------------------------------------------------------ */
.adv-select-split{
  display: grid;
  grid-template-columns: 1fr 1.1fr;
  gap: 14px;
  margin-top: 10px;
}

.adv-select-left, .adv-select-right{
  min-width: 0;
}

.adv-chosen-wrap{
  padding: 10px 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.10);
}

.adv-chosen-head{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.adv-chosen-title{
  font-weight: 700;
  font-size: 13px;
  letter-spacing: 0.2px;
  color: rgba(255,255,255,0.92);
}

.adv-chosen-hint{
  font-size: 12px;
  color: rgba(255,255,255,0.60);
}

/* Make selected list comfortable inside right pane */
.adv-chosen-wrap .adv-selected-list{
  margin-top: 0;
  max-height: 220px;
  overflow: auto;
  padding-right: 4px;
}

.adv-chosen-wrap .empty-state{
  margin-top: 0;
}

/* Responsive: stack on small screens */
@media (max-width: 980px){
  .adv-select-split{
    grid-template-columns: 1fr;
  }
}


/* =========================================================
   ADVANCED MODE — Layout align + bigger "Sélection" panel
   Version: V1.3.80 (ADV_LAYOUT_ALIGN)
   ========================================================= */
#advancedGrid { align-items: start; }

/* Make Selection panel taller and give lists more room */
#advSelectionPanel { min-height: 320px; }

/* Align the two columns inside the selection panel */
#advSelectionPanel .adv-select-columns,
#advSelectionPanel .adv-select-grid,
#advSelectionPanel .adv-selection-columns {
  display: flex;
  gap: 14px;
  align-items: stretch;
}

#advSelectionPanel .adv-select-col,
#advSelectionPanel .adv-select-left,
#advSelectionPanel .adv-select-right {
  flex: 1 1 0;
  min-width: 0;
}

/* Remove any legacy offset that misaligns "Disponibles" vs "Sélectionnés" */
#advSelectionPanel .adv-select-right,
#advSelectionPanel .adv-select-col.right,
#advSelectionPanel .adv-select-col--right {
  margin-top: 0 !important;
}

/* Increase list viewport height in selection panel */
#advSelectionPanel .list,
#advSelectionPanel .adv-list,
#advSelectionPanel .ore-list,
#advSelectionPanel .adv-ores-list {
  max-height: 200px;
  overflow: auto;
}

/* Consistent header alignment inside panels */
.panel .panel-header,
.panel .header-row,
.adv-panel .adv-header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
}


/* =========================================================
   ADVANCED MODE — Align v2 + bigger Sélection
   Version: V1.3.59 (ADV_LAYOUT_ALIGN2)
   ========================================================= */

/* Fix vertical misalignment between "Disponibles" and "Sélectionnés" */
.adv-avail-wrap{ margin-top: 0 !important; }

/* Make the selection panel more substantial */
.page-mining .adv-select .panel-body{ min-height: 380px; }

/* Ensure both columns stretch equally */
.adv-select-split{ align-items: stretch; }
.adv-select-left, .adv-select-right{ display:flex; }
.adv-avail-wrap, .adv-chosen-wrap{ flex:1 1 auto; }

/* Give more room to ore lists */
.adv-avail-ores{ max-height: 240px; overflow:auto; }
.adv-selected-list{ max-height: 240px; overflow:auto; }

/* Keep headers nicely aligned */
.adv-avail-head, .adv-chosen-head{
  min-height: 28px;
}


/* =========================================================
   ADVANCED MODE — Align v3 (wider left + bigger Sélection)
   Version: V1.3.60 (ADV_LAYOUT_ALIGN3)
   ========================================================= */

/* Give a bit more space to the left column (Sélection + Paramètres) */
.adv-grid{
  grid-template-columns: minmax(720px, 1.35fr) minmax(520px, 1fr);
}

/* Bigger "Sélection" panel (more comfortable when lists are populated) */
.page-mining .adv-select .panel-body{
  min-height: 420px;
}

/* More room for ore lists */
.adv-avail-ores{ max-height: 280px; overflow:auto; }
.adv-selected-list{ max-height: 280px; overflow:auto; }

/* Cleaner alignment for the selection toolbar (Vider + status) */
.adv-toolbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin: 8px 0 10px;
}
.adv-mini-status{ text-align:right; }

/* Keep columns visually aligned */
.adv-select-split{ align-items: stretch; }
.adv-select-left, .adv-select-right{ min-width:0; }


/* =========================================================
   ADVANCED MODE — Align v4 (HTML fix + equal panel heights)
   Version: V1.3.61 (ADV_LAYOUT_ALIGN4)
   ========================================================= */

/* Equalize top row panel heights for a cleaner grid */
.page-mining .adv-select .panel-body { min-height: 460px; }
.page-mining .adv-results .panel-body { min-height: 460px; }

/* Slightly more breathing room in lists */
.adv-avail-ores { max-height: 320px; overflow:auto; }
.adv-selected-list { max-height: 320px; overflow:auto; }

/* Subtitle alignment: keep titles/subtitles on a consistent baseline */
.panel-head { gap: 6px; }
.panel-subtitle { opacity: .85; }


/* =========================================================
   BEGINNER MODE — Restore header layout (avoid Adv-only CSS bleed)
   Version: V1.3.62 (BEGINNER_RESTORE_HEADERS)
   ========================================================= */

/* The following rules neutralize global header flex rules for Beginner view only. */
#moduleBeginnerView .panel .panel-header,
#moduleBeginnerView .panel .header-row{
  display: block;
  align-items: initial;
  justify-content: initial;
  gap: 0;
}

#moduleBeginnerView .panel-head{ gap: 0; }
#moduleBeginnerView .panel-subtitle{ opacity: 1; }

/* Keep the flex header behavior for Advanced panels only (explicit scope). */
.module-mining .adv-grid .panel .panel-header,
.module-mining .adv-grid .panel .header-row,
.module-mining .adv-grid .adv-panel .adv-header{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
}

.module-mining .adv-grid .panel-head{ gap: 6px; }
.module-mining .adv-grid .panel-subtitle{ opacity: .85; }


/* =========================================================
   SAFETY GUARD — Prevent Advanced blocks from leaking into Beginner
   Version: V1.3.63 (ADV_NO_LEAK_GUARD)
   ========================================================= */

/* If DOM nesting gets broken during HTML edits, these selectors guarantee
   Advanced-only panels never render inside the Beginner view. */
#moduleBeginnerView .adv-grid,
#moduleBeginnerView .adv-select,
#moduleBeginnerView .adv-results,
#moduleBeginnerView .adv-params{
  display: none !important;
}

/* Hard-hide module views when aria-hidden is true (more robust than relying on class names). */
#moduleAdvancedView[aria-hidden="true"],
#moduleBeginnerView[aria-hidden="true"]{
  display: none !important;
}


/* =========================================================
   HARD SCOPE — Advanced panels render ONLY inside #moduleAdvancedView
   Version: V1.3.66 (ADV_STRICT_SCOPE_REGEN)
   ========================================================= */

/* Default: hide any Advanced-only blocks everywhere */
.adv-grid,
.adv-select,
.adv-params,
.adv-results{
  display: none !important;
}

/* Allow rendering ONLY when inside the Advanced view container */
#moduleAdvancedView .adv-grid{ display: grid !important; }
#moduleAdvancedView .adv-select,
#moduleAdvancedView .adv-params,
#moduleAdvancedView .adv-results{
  display: block !important;
}


/* 4-panel advanced layout specifics */
.page-mining .adv-orepick .adv-avail-ores{
  max-height: 520px;
}

.page-mining .adv-chosen .adv-selected-list{
  max-height: 520px;
}

.page-mining .adv-refine .adv-actions{
  margin-top: 12px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.page-mining .adv-refine .adv-status{
  margin-top: 10px;
  opacity: .9;
}

.page-mining .adv-form-grid{
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

.page-mining .adv-form-grid .field{ min-width: 0; }

.page-mining .adv-json{
  margin-top: 12px;
}

.page-mining .adv-json pre{
  max-height: 260px;
  overflow: auto;
}


/* =========================================================
   OVERRIDE — Advanced 4-panel layout (fix narrow columns / old responsive constraints)
   Version: V1.3.67 (ADV_4PANELS_OVERRIDE)
   ========================================================= */

#moduleAdvancedView .adv-grid{
  /* cancel legacy max-width clamps */
  max-width: min(1600px, 100%) !important;
  width: min(1600px, 100%) !important;
  margin-left: auto !important;
  margin-right: auto !important;

  display: grid !important;
  grid-template-columns: 1fr 1fr !important;
  gap: 18px !important;
  align-items: start !important;
}

#moduleAdvancedView .adv-col{
  display: grid !important;
  grid-template-columns: 1fr 1fr !important;
  gap: 18px !important;
  align-items: start !important;
  min-width: 0 !important;
}

/* Prevent panels from shrinking too far */
#moduleAdvancedView .adv-grid .panel{
  min-width: 320px;
}

/* Breakpoints: keep it readable */
@media (max-width: 1400px){
  #moduleAdvancedView .adv-grid{
    grid-template-columns: 1fr !important; /* stack left/right halves */
  }
  #moduleAdvancedView .adv-col{
    grid-template-columns: 1fr 1fr !important; /* still 2 panels per row */
  }
}

@media (max-width: 980px){
  #moduleAdvancedView .adv-col{
    grid-template-columns: 1fr !important; /* stack panels */
  }
  #moduleAdvancedView .adv-grid .panel{
    min-width: 0;
  }
}

/* Give "Selection" panels a bit more presence */
#moduleAdvancedView .adv-orepick .panel-body,
#moduleAdvancedView .adv-chosen .panel-body{
  min-height: 360px;
}


/* =========================================================
   OVERRIDE — Center Advanced grid with equal margins
   Version: V1.3.68 (ADV_CENTER_EQUAL_MARGINS)
   Scope: ONLY Mode Avancé (#moduleAdvancedView)
   ========================================================= */

#moduleAdvancedView{
  /* ensure consistent inner gutters irrespective of viewport */
  padding-left: clamp(14px, 2vw, 28px) !important;
  padding-right: clamp(14px, 2vw, 28px) !important;
}

/* Center the whole 4-panel block and keep a consistent outer margin */
#moduleAdvancedView .adv-grid{
  width: min(1600px, 100%) !important;
  margin-left: auto !important;
  margin-right: auto !important;
  padding: 0 !important; /* outer margin handled by #moduleAdvancedView padding */
}

/* Make sure each half stays aligned and panels don't visually drift */
#moduleAdvancedView .adv-col{
  width: 100% !important;
}

/* Harmonize panel padding so all four feel identical */
#moduleAdvancedView .panel{
  padding: 0 !important; /* panel uses internal .panel-head/.panel-body padding */
}
#moduleAdvancedView .panel-head{
  padding-left: 16px !important;
  padding-right: 16px !important;
}
#moduleAdvancedView .panel-body{
  padding-left: 16px !important;
  padding-right: 16px !important;
}

/* Optional: slightly increase gaps for breathing room (uniform everywhere) */
#moduleAdvancedView .adv-grid,
#moduleAdvancedView .adv-col{
  gap: 18px !important;
}

/* ===========================
   ADVANCED — 4 PANELS (V1.3.69)
   - Always centered
   - Equal margins/gaps
   - Does NOT affect Beginner mode
   =========================== */

.page-mining #moduleAdvancedView{
  padding: 22px 24px 0;
}

.page-mining #moduleAdvancedView .adv-grid.adv-grid-4{
  display: grid;
  grid-template-columns: repeat(4, minmax(260px, 1fr));
  gap: 18px;
  width: min(1680px, 100%);
  margin: 0 auto;
  align-items: stretch;
}

.page-mining #moduleAdvancedView .adv-grid.adv-grid-4 > .panel{
  height: 100%;
  min-height: 360px;
}

/* Make selection lists usable when populated */
.page-mining #moduleAdvancedView .adv-avail-ores,
.page-mining #moduleAdvancedView .adv-selected-list{
  max-height: 320px;
  overflow: auto;
}

/* Keep refining panel comfortable */
.page-mining #moduleAdvancedView .adv-refine .panel-body{
  min-height: 360px;
}

/* Responsive fallback */
@media (max-width: 1400px){
  .page-mining #moduleAdvancedView .adv-grid.adv-grid-4{
    grid-template-columns: repeat(2, minmax(280px, 1fr));
    width: min(1200px, 100%);
  }
}

@media (max-width: 860px){
  .page-mining #moduleAdvancedView .adv-grid.adv-grid-4{
    grid-template-columns: 1fr;
    width: min(720px, 100%);
  }
  .page-mining #moduleAdvancedView .adv-grid.adv-grid-4 > .panel{
    min-height: 0;
  }
}

/* =========================
   ADVANCED — Products + Rows (DATA/RATIOS)
   ========================= */
#moduleAdvancedView .adv-products{
  margin: 10px 0 14px 0;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  background: rgba(0,0,0,0.14);
}
#moduleAdvancedView .adv-products-head{
  display:flex;
  justify-content:space-between;
  gap:12px;
  margin-bottom:10px;
}
#moduleAdvancedView .adv-products-title{
  font-weight: 900;
}
#moduleAdvancedView .adv-products-sub{
  opacity:.72;
  font-size: 12px;
}
#moduleAdvancedView .adv-products-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 10px;
}
@media (max-width: 980px){
  #moduleAdvancedView .adv-products-grid{ grid-template-columns: 1fr; }
}
#moduleAdvancedView .adv-product{
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 12px;
  background: rgba(255,255,255,0.04);
  padding: 10px 12px;
}
#moduleAdvancedView .adv-product-head{
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items: baseline;
}
#moduleAdvancedView .adv-product-name{
  font-weight: 900;
}
#moduleAdvancedView .adv-product-metrics{
  opacity:.92;
  font-size: 12px;
  display:flex;
  gap:8px;
  align-items:center;
}
#moduleAdvancedView .adv-rows{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 8px 12px;
  margin: 10px 0 10px 0;
}
@media (max-width: 980px){
  #moduleAdvancedView .adv-rows{ grid-template-columns: 1fr; }
}
#moduleAdvancedView .adv-row{
  display:flex;
  justify-content:space-between;
  gap:10px;
  opacity:.92;
}
#moduleAdvancedView .adv-row-k{
  opacity:.72;
  font-size: 12px;
}
#moduleAdvancedView .adv-row-v{
  font-size: 12px;
}
#moduleAdvancedView .pill{
  border: 1px solid rgba(32,214,232,0.35);
  background: rgba(32,214,232,0.10);
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 12px;
}
#moduleAdvancedView .dim{ opacity: .72; }

/* =========================
   ADVANCED — Offline status (local data fallback)
   ========================= */
#moduleAdvancedView .adv-status.is-offline{
  border: 1px solid rgba(0,255,168,0.25);
  background: rgba(0,255,168,0.08);
}

/* =========================
   ADV ORES COLUMNS (NO SCROLL)
   Objectif: afficher tous les minerais en colonnes, sans scroll interne,
   et avec un style proche du Mode Débutant.
   ========================= */
.page-mining #moduleAdvancedView .adv-orepick > .panel-body{
  /* Let the content define height (avoid forcing internal scroll behavior) */
  flex: 0 0 auto;
  overflow: visible;
}

.page-mining #moduleAdvancedView .adv-orepick .adv-avail-ores{
  /* Override any previous max-height/overflow rules */
  max-height: none !important;
  overflow: visible !important;
  padding-right: 0 !important;

  /* Column layout */
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)) !important;
  gap: 8px !important;
  align-items: start;
}

/* Reuse Mode Débutant ore-item look, but denser for Advanced */
.page-mining #moduleAdvancedView .adv-orepick .adv-avail-ores .ore-item{
  width: 100%;
  justify-content: space-between;
  padding: 8px 10px;
  border-radius: 12px;
}

.page-mining #moduleAdvancedView .adv-orepick .adv-avail-ores .ore-item .ore-name{
  font-size: 12.5px;
}

.page-mining #moduleAdvancedView .adv-orepick .adv-avail-ores .adv-ore-badge{
  margin-left: 10px;
}

/* Responsive: pack columns on smaller widths */
@media (max-width: 980px){
  .page-mining #moduleAdvancedView .adv-orepick .adv-avail-ores{
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)) !important;
  }
}

/* ===== V1.3.88 — MINING Advanced "techbar" (version bar) dock + centering ===== */
#miningTechbarSlot{
  grid-column: 1 / -1;
  margin-top: 10px;
  display: flex;
  justify-content: center;
}

#miningTechbarSlot .page-mining-version{
  position: static !important;
  left: auto !important;
  bottom: auto !important;
  transform: none !important;
  width: min(980px, calc(100% - 24px));
  margin: 0 auto !important;
  z-index: auto !important;
}


/* --- Live API endpoint config (localStorage) --- */
.api-endpoint-config{
  margin-top: 10px;
  padding: 8px 10px;
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 12px;
  background: rgba(0,0,0,0.18);
}
.api-endpoint-config summary{
  cursor: pointer;
  font-weight: 700;
  color: rgba(255,255,255,0.85);
  outline: none;
}
.api-endpoint-row{
  display: flex;
  gap: 10px;
  margin-top: 10px;
  align-items: center;
}
#miningApiBaseInput{
  flex: 1 1 auto;
  min-width: 220px;
  height: 38px;
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  color: rgba(255,255,255,0.90);
}
#miningApiBaseInput::placeholder{ color: rgba(255,255,255,0.45); }
#miningApiBaseSaveBtn, #miningApiBaseTestBtn{
  height: 38px;
  padding: 0 14px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.20);
  color: rgba(255,255,255,0.90);
  cursor: pointer;
}
#miningApiBaseSaveBtn:hover, #miningApiBaseTestBtn:hover{
  background: rgba(0,0,0,0.30);
}
.api-endpoint-hint{
  margin-top: 8px;
  font-size: 12px;
  color: rgba(255,255,255,0.65);
  line-height: 1.35;
}
